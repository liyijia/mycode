@using LY.EMIS5.Common;
@using LY.EMIS5.Const;
@using LY.EMIS5.Common.Extensions;
@model LY.EMIS5.Entities.Core.Memberships.Project
@{
    ViewBag.Title = "项目审核";
}

<div class="row">
    <div class="col-lg-12">
        <section class="panel">
            <header class="panel-heading">
                项目审核
            </header>
            <div class="panel-body">
                <form class="form-horizontal adminex-form" method="post">
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">项目名称</label>
                        <div class="col-sm-10">
                            @Html.HiddenFor(c => c.Id)
                            <label class="control-label">@Model.ProjectName</label>
                        </div>
                    </div>
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">状态</label>
                        <div class="col-sm-10">
                            <label class="control-label">@Model.ProjectProgress.GetDescription()</label>
                        </div>
                    </div>
                    @{
                       
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">下载链接</label>
                                <div class="col-sm-10">
                                    <label class="control-label"><a href="@Model.Link" title="_black">@Model.Link</a></label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">规模</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.Scale</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">业主</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.Owner</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">代理公司</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.Proxy</label>
                                </div>
                            </div>
                            
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">保证金来源</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.Source</label>
                                </div>
                            </div>
                            if (Model.Source == "代打")
                            {
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">代打金额</label>
                                    <div class="col-sm-10 input-group">
                                        <label class="control-label">@(Model.ReplaceMoney)万元</label>
                                    </div>
                                </div>
                            }

                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">保证金金额</label>
                                <div class="col-sm-10 input-group">
                                    <label class="control-label">@(Model.Money)万元</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">保证金截至时间</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.EndDate.ToYearMonthDayString()</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">保证金打款方式</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.Type</label>
                                </div>
                            </div>
                            if (Model.Type == "网银支付")
                            {
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">保证金账户名</label>
                                    <div class="col-sm-10">
                                        <label class="control-label">@Model.UserName</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">保证金账号</label>
                                    <div class="col-sm-10">
                                        <label class="control-label">@Model.Account</label>
                                    </div>
                                </div>
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">保证金开户行</label>
                                    <div class="col-sm-10">
                                        <label class="control-label">@Model.Bank</label>
                                    </div>
                                </div>
                            }

                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">开标时间</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.OpenDate.ToYearMonthDayString()</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">开标地点</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.OpenAddress</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">开标人</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@(Model.OpenManager != null ? Model.OpenManager.Name : "")</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">资料费</label>
                                <div class="col-sm-10 input-group">
                                    <label class="control-label">@(Model.MaterialFee)元</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">公司名称</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.CompanyName</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">资质要求</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.Aptitude</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">收费情况</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.MoneySituation</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">人员要求</label>
                                <div class="col-sm-10">
                                    <label class="control-label">@Model.Requirement</label>
                                </div>
                            </div>

                    }
                    @foreach (var item in Model.Opinions.Where(c => c.Done).OrderBy(c => c.Id))
                    {
                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">@(item.Manager.Name+item.ProjectProgress)意见</label>
                            <div class="col-sm-10">
                                <label class="control-label">@item.Content</label><br />
                                <label class="control-label"> @item.DoneDate.ToChineseDateString()</label>
                            </div>
                        </div>
                   

                    }
                    @if (ViewBag.Flow.dest.role != null)
                    {
                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">@ViewBag.Flow.dest.role</label>
                            <div class="col-sm-10">
                                @Html.DropDownList("managerId", ViewBag.List as IList<SelectListItem>, new { @class = "form-control" })
                            </div>
                        </div>
                        
                    }
                    <div class="form-group">
                        <label class="col-sm-2 col-sm-2 control-label">意见</label>
                        <div class="col-sm-10">
                            @Html.TextArea("Content", new { @class = "form-control" })
                        </div>
                    </div>
                    @*@foreach (var item in Model.Opinions.Where(c => !c.Done).OrderBy(c => c.Id))
                    {
                        if (item.Kind != "")
                        {
                            <div class="form-group">
                                <label class="col-sm-2 col-sm-2 control-label">@item.Kind</label>
                                <div class="col-sm-10">
                                    @Html.DropDownList("managerId", ViewBag.List as IList<SelectListItem>, new { @class = "form-control" })
                                </div>
                            </div>
                        }
                        <div class="form-group">
                            @if (item.ProjectProgress == "开标结束")
                            {
                                <div class="form-group">
                                    <label class="col-sm-2 col-sm-2 control-label">是否中标</label>
                                    <div class="col-sm-10">
                                        <label>
                                            <input type="radio" name="bid" value="true" checked="checked">
                                            是
                                        </label>
                                        <label>
                                            <input type="radio" name="bid" value="false">
                                            否
                                        </label>
                                    </div>
                                </div>
                            }
                            <label class="col-sm-2 col-sm-2 control-label">通过审核</label>
                            <div class="col-sm-10">
                                @Html.Hidden("opinionid", item.Id)
                                    <label>
                                        <input type="radio" name="agree" value="true" checked="checked">
                                        通过
                                    </label>
                               
                                    <label>
                                        <input type="radio" name="agree" value="false">
                                        不通过
                                    </label>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-sm-2 col-sm-2 control-label">审核意见</label>
                            <div class="col-sm-10">
                                @Html.TextArea("Content", new { @class = "form-control" })
                            </div>
                        </div>

                    }*@
                    
                    <div class="form-group">
                        <div class="col-lg-offset-2 col-lg-10">
                           
                            <button class="btn btn-warning" type="submit" onclick="submitForm(@((int)EnumHelper<ProjectProgresses>.EnumFromString(ViewBag.Flow.dest.name)))">@("提交" + ViewBag.Flow.dest.role + ViewBag.Flow.dest.name)</button>
                        </div>
                    </div>
                </form>
            </div>
           

        </section>
    </div>
</div>